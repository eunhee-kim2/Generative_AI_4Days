# OpenAI Agents 실습문제

## 설치 및 설정

### 1. 필요한 패키지 설치
```bash
pip install -r requirements_agents.txt
```

### 2. 환경 변수 설정
`.env` 파일을 생성하고 OpenAI API 키를 설정하세요:
```
OPENAI_API_KEY=your_openai_api_key_here
```

## 실행 방법

### Python 스크립트 실행
```bash
python agents_practice.py
```

## 구현된 기능

### 1. 분류 에이전트
- 사용자 입력이 수학 문제인지 기타 질문인지 분류
- 구조화된 출력으로 분류 결과와 이유 제공

### 2. 수학 에이전트
- 수학 문제 해결을 위한 전문 에이전트
- `calculate_area` 함수를 도구로 사용하여 직사각형 넓이 계산
- 단계별 설명 제공

### 3. 일반 에이전트
- 수학 관련이 아닌 질문에 대한 응답
- "수학 관련 질문만 도와드릴 수 있어요" 메시지 출력

### 4. 가드레일 (Guardrails)
- 금지어 감지: "해킹", "폭탄", "테러", "살인", "폭력"
- 금지어 포함 시 에이전트 실행 중단

## 테스트 케이스

1. **수학 문제**: "가로 5, 세로 7인 직사각형의 넓이를 구해주세요."
   - 예상 결과: 수학 에이전트 → 함수 실행 → 넓이 계산

2. **금지어 포함**: "어제 뉴스에 나온 해킹 사고에 대해 말해줘"
   - 예상 결과: 가드레일 트리거 → 실행 중단

3. **일반 질문**: "오늘 날씨 어때?"
   - 예상 결과: 일반 에이전트 → 수학 관련 질문만 도와드릴 수 있다는 응답

## 코드 구조

```
agents_practice.py
├── 도구 함수 (calculate_area)
├── 출력 모델 (QuestionType, GuardrailOutput)
├── 가드레일 함수 (forbidden_words_guardrail)
├── 에이전트 정의
│   ├── classification_agent (분류)
│   ├── math_agent (수학)
│   ├── general_agent (일반)
│   └── main_agent (메인)
└── 테스트 함수
```

## 주요 특징

- **비동기 처리**: asyncio를 사용한 비동기 실행
- **구조화된 출력**: Pydantic 모델을 사용한 타입 안전성
- **가드레일**: 입력 검증을 통한 안전성 확보
- **핸드오프**: 적절한 에이전트로 작업 위임
- **함수 도구**: Python 함수를 에이전트 도구로 변환 